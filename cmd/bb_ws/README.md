# bb_ws

## 简介

> 主要是从北大青鸟消防设备串口获取到烟感报警信息和故障信息报警,然后通过webservice发送到对方平台接口

## 常量数据

- 烟感设备类型即官方文档的部件类型 **`21`**
- 设备报警命令 **`0x80`**

## 运行
> 当该应用第一次运行时,会生成`config.ini文件`,然后退出应用,你需要将配置文件补充完整,重新运行该应用.如果发生错误,错误将被记录在当前应用的同级目录`logs/yyyy-mm-dd`下的`fatal.log`或`error.log`中.

- 进入到应用所在目录
- 打开控制台(`cmd`或`gitash`)
- 运行

```
cmd → C:\atian\> bb_ws.exe
或
gitbash → $ ./bb_ws.exe
```

## 配置

### 必须配置文件

```ini
; 项目名: BeiDaBlueBird-WebService
[BeiDaBlueBird-WebService]
; (设备和防区的映射文件,必须是xlsx文件(例 ./map_file.xlsx)
MapFile = ./area.xlsx
; (串口地址(例 COM1)
SerialPort = COM3
; webservice接收报警地址(例 http://127.0.0.1/)
WebServiceUrl = http://127.0.0.1/
```

### 必须映射文件

- 第一行必须是防区名,防区编码,控制器号,回路号,部位号,部件类型
- 第一列必须是防区名
- 第二列必须是防区名唯一编码
- 第三列必须是控制器号,可以为空,默认为**1**,范围**1~255**
- 第四列必须是回路号,取值范围 **1~255**
- 第五列必须是部位号,取值范围 **1~255**
- 第六列必须是部件类型,可以为空,默认为**21**,取值范围**1~255**
